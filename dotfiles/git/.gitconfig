# -----------------------------------------------------------------------------
# Global Git configuration
# Filosofía:
# - Seguridad por defecto
# - Historial legible
# - Comodidad sin magia
# -----------------------------------------------------------------------------

[user]
	name = Arturo Lopez
	email = lgzarturo@gmail.com

# -----------------------------------------------------------------------------
# Comportamiento básico
# -----------------------------------------------------------------------------
[init]
	defaultBranch = main

[core]
	editor = code --new-window --wait
	excludesfile = ~/.gitignore_global
	quotepath = false
	precomposeunicode = false
	untrackedCache = true
	autocrlf = input
	safecrlf = true
	pager = less -FRSX
	preloadIndex = true
	deltaBaseCacheLimit = 2g
	fileMode = true

[color]
	ui = auto

[color "branch"]
  current = yellow reverse
	local = yellow
  remote = green

[color "diff"]
	meta = yellow bold
	frag = magenta bold # line info
	old = red # deletions
	new = green # additions

[color "status"]
	added = yellow
	changed = green
	untracked = cyan

# -----------------------------------------------------------------------------
# Pull, fetch y merge
# -----------------------------------------------------------------------------
[pull]
	rebase = true
	ff = only

[rebase]
	autoStash = true

[fetch]
	prune = true
	parallel = 5

[merge]
	conflictStyle = zdiff3
	tool = vscode-merge

[mergetool]
	KeppBackup = false

[mergetool "vscode-merge"]
	cmd = code --new-window --wait $MERGED

# -----------------------------------------------------------------------------
# Diff y log (historial legible)
# -----------------------------------------------------------------------------
[diff]
	tool = vscode-diff
	algorithm = histogram
	colorMoved = default
	renames = copies

[difftool]
	prompt = false

[difftool "vscode-diff"]
	cmd = code --new-window --wait --diff $LOCAL $REMOTE

[log]
	date = iso

# -----------------------------------------------------------------------------
# Aliases útiles (sin ocultar conceptos de Git)
# -----------------------------------------------------------------------------
[alias]
	st = status -sb
	co = checkout
	br = branch
	ci = commit
	cm = commit -m
	ca = commit --amend --no-edit
	call = !git add -A && git commit -av

	# Diff simplificado
	df = diff
	dc = diff --cached
	di = !"d() { git diff --patch-with-stat HEAD~$1; }; git diff-index --quiet HEAD -- || clear; d"

	# Log compacto y legible
	lg = log --graph --decorate --oneline --all
	plg = log --graph --decorate --pretty=oneline --abbrev-commit

	# Log detallado para revisar cambios
	l = log --pretty=oneline -n 20 --graph --abbrev-commit
	ll = log --stat

	# Mostrar último commit
	last = log -1 HEAD

	# Mostrar ramas remotas limpias
	prune-remote = fetch --prune

	# Reset seguro al último commit
	undo = reset --soft HEAD~1

	# Deshacer cambios en el área de staging
	unstage = reset HEAD --

	# Recursive
	pr = pull --recurse-submodules
	cr = clone --recursive

	# Ir a una rama
	go = "!f() { git checkout -b \"$1\" 2> /dev/null || git checkout \"$1\"; }; f"

# -----------------------------------------------------------------------------
# Seguridad y credenciales
# -----------------------------------------------------------------------------
[credential]
	helper = manager-core

# -----------------------------------------------------------------------------
# Protección contra errores comunes
# -----------------------------------------------------------------------------
[advice]
	detachedHead = false

[push]
	default = simple
	autoSetupRemote = true

# -----------------------------------------------------------------------------
# Performance
# -----------------------------------------------------------------------------
[gc]
	auto = 256

# -----------------------------------------------------------------------------
# Firmado de commits (opcional)
# Descomentar cuando se configure GPG
# -----------------------------------------------------------------------------
#[commit]
#	gpgsign = true

#[user]
#	signingkey = YOUR_GPG_KEY_ID

# -----------------------------------------------------------------------------
# Resolución automática de conflictos (opcional)
# Descomentar si se desea habilitar
# -----------------------------------------------------------------------------
[rerere]
	enabled = true

# -----------------------------------------------------------------------------
# Submódulos (opcional)
# Descomentar si se utilizan submódulos
# -----------------------------------------------------------------------------
[submodule]
	recurse = true

# -----------------------------------------------------------------------------
# Configuraciones adicionales
# -----------------------------------------------------------------------------
[http]
	postBuffer = 524288000

# -----------------------------------------------------------------------------
# Git LFS (Large File Storage) configuración
# Descomentar si se utiliza Git LFS
# -----------------------------------------------------------------------------
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true

# -----------------------------------------------------------------------------
# Atajos para URLs comunes
# -----------------------------------------------------------------------------
[url "git@github.com:"]
	insteadOf = "gh:"
	pushInsteadOf = "github:"
	pushInsteadOf = "git://github.com/"

[url "git://github.com/"]
	insteadOf = "github:"

[url "git@gist.github.com:"]
	insteadOf = "gst:"
	pushInsteadOf = "gist:"
	pushInsteadOf = "git://gist.github.com/"

[url "git://gist.github.com/"]
	insteadOf = "gist:"